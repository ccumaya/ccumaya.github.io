<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8">
  <title></title>
  
  <script>
    var getUrlParameter = function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1));
        var sURLVariables = sPageURL.split('&');
        var sParameterName;
        var i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : sParameterName[1];
            }
        }
    };

    </script>

<style>
body{
    background-color: #72583a;
}
</style>

<style>
h1 {
    position: relative;
    color: rgba(255, 255, 255, 0.3);
    font-size: 5em;
    
}
h1:before {
    content: attr(data-text);
    position: absolute;
    overflow: hidden;
    max-width: 12em;
    white-space: nowrap;
    color: rgb(95, 43, 43);
    animation: loading 5s linear;


}
@keyframes loading {
    0% {
        max-width: 0em;
    }
    10% {  /* 讓前10%只顯示很小的距離，產生延遲效果 */
        max-width: 0.01em;
    }
}
</style>

<style>
#popupPnl
{
    position: absolute;
    top: 0;
    left: 0;
    background-color: rgba(255, 255, 255, 0.87);
    margin: 1em;
    height: 90%;
    /* display:table-cell;  */

    /* 圓角矩形 */
    -webkit-border-radius: 30px;
    -moz-border-radius: 30px;
    border-radius: 30px;
}

.msg1, .msg2, .msg3
{
    display: block;
}
.msg1
{
    text-align: center;
}
.msg2
{
    font-size: xx-large;
    margin: 0 0 2em 0;
    text-align: center;
}
.msg3
{
    font-size: xx-large;
    padding: 0 5em 0 5em;
    margin: 0 0 1em 0;
}

#survivalTodo
{
    display:none;
}
#traitorTodo
{
    display:none;
}

#startReadPnl
{
    display: block;
    text-align: center;
}

#startReadBtn
{
    display: inline-block;
    border: 4px outset #ffb09c;
    background: linear-gradient(-20deg, #b16b3d, #f0ae8d, #ffffff);
    padding:0.5em;

    /* 圓角矩形 */
    -webkit-border-radius: 30px;
    -moz-border-radius: 30px;
    border-radius: 30px;

    font-size:xx-large;
}

</style>

<style>
.mainDiv
{
    text-align: center; 
    border: 1px double #7883df;

    /* 圓角矩形 */
    /* -webkit-border-radius: 90px;
    -moz-border-radius: 90px;
    border-radius: 90px;   */
}

.loadingText
{
    min-width: 600px;
    min-height: 80px;
}

#imgHaunt
{
    width: 100%;
    vertical-align: bottom;

    /* 上半圓角矩形 */
    -webkit-border-top-left-radius: 90px;
    -webkit-border-top-right-radius: 90px;
    -moz-border-radius-topleft: 90px;
    -moz-border-radius-topright: 90px;
    border-top-left-radius: 90px;
    border-top-right-radius: 90px;
}

#imgDonate
{
    width: 100%;
    background-color: #ffffff;

    /* 下半圓角矩形 */
    -webkit-border-bottom-right-radius: 90px;
    -webkit-border-bottom-left-radius: 90px;
    -moz-border-radius-bottomright: 90px;
    -moz-border-radius-bottomleft: 90px;
    border-bottom-right-radius: 90px;
    border-bottom-left-radius: 90px;
}

</style>

</head>
<body>

    <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous"></script>
  <script>
    $(function () {
        console.log("ready!");

        //以下是有參數的狀況才會觸發
        var t = getUrlParameter('t'); //idxType
        var i = getUrlParameter('i'); //idx

        //var timgurl = imgUrl(hauntNum, true);
        var imgUrl = 'https://raw.githubusercontent.com/ccumaya/BetrayalAtHouseOnTheHillHauntSelector/master/HauntImg/'+
            (t=='s' ? 'survival(1-101)' : 'traitor(1-101)') + '/' +
            i + '.jpg';

        $('#imgHaunt').attr('src', imgUrl);

        //new Image(imgUrl); // preloads the image
        //var h1 = document.getElementsByTagName('h1')[0];
        //h1.innerHTML = '<img src="'+imgUrl+'" alt="' + h1.innerHTML + '" class="hauntImg">';

        $('#imgDonate').attr('src', 'donateDes.png');
        $('#aDonate').attr('href', 'stickershop_imgmap.html');

        //蓋板說明
        if(t=='t')
        {
            $('#traitorTodo').css('display', 'inline-block');
        }
        else
        {
            $('#survivalTodo').css('display', 'inline-block');
        }

        $('#startReadBtn').click(function(){
            $('#popupPnl').css('display','none');
        });
    });
    
    
    </script>

<div class='mainDiv'>
    <img id='imgHaunt' />
</div>
<div style='text-align: center; '>
    <a id='aDonate' target='_blank'><img id='imgDonate' width='100%' /></a>
</div>


<div id='popupPnl'>
    <span class='msg1'>    
        <h1 data-text="發生了一件恐怖的事...">發生了一件恐怖的事...</h1>
    </span>

    <span class='msg2'>
        遊戲的勝利條件，自此開始展開。
    </span>

    <span id='survivalTodo' class='msg3'>
        請安靜閱讀以下劇本，五分鐘後，英雄們再來討論如何行動。
    </span>
    <span id='traitorTodo' class='msg3'>
        請叛徒先遠離遊戲桌，安靜研讀以下專屬劇本，五分鐘後，再回遊戲桌繼續行動。
    </span>

    <div id='startReadPnl'>
        <span id='startReadBtn'>開始閱讀</span>
    </div>
</div>

</body>
</html>